---
layout: post
title:  "Howto upgrade Trendmicro DeepSecurity silently"
date:   2022-04-02 07:40:00 +0800
categories: [security]
---
### Requirement
- Upgrade DeepSecurity to the latest version
- RHEL Env: CLI Only

### Upgrade Consideration
- DeepSecurity only support upgrade of 2 version newer than current version
- Create a snapshot of the current DSM VM
- DSM will temporary disabled
- DeepSecurity Agent will remain working

### Method
- Download Installation Package from here: https://help.deepsecurity.trendmicro.com/software.html
- Trigger upgrade with the command
  {% highlight ruby %}
  ./Manager-Linux-20.0.543.x64.sh -q -console

  -----

  Unpacking JRE ...
  Starting Installer ...
  Unattended (Silent) mode started
  Checking for previous versions of Trend Micro Deep Security Manager...
  Upgrade Verification Screen settings accepted...
  The upgrade readiness check is starting.
  Readiness Check Summary report generated into path /tmp/DeepSecurityInstallerReport.csv
  The upgrade readiness check is complete.
  Master key configuration settings accepted...
  All settings accepted, ready to execute...
  Stopping Trend Micro Deep Security Manager Service...
  Uninstalling previous version
  Extracting files ...
  Setting Up...
  Connecting to the Database...
  Analyzing Database Schema...
  Analyzing existing Database Schema:20 % ...
  Analyzing existing Database Schema:40 % ...
  Analyzing existing Database Schema:60 % ...
  Analyzing existing Database Schema:80 % ...
  Analyzing existing Database Schema:100 % ...
  Updating Database Schema...
  Schema update:25 % ...
  Schema update:50 % ...
  Schema update:75 % ...
  Finishing Schema Update...
  Schema update:100 % ...
  Creating Temporary Directory...
  Installing Reports...
  Installing Modules and Plug-ins...
  Importing Software Packages...
  Retire deprecated features...
  Importing Scan Cache Settings...
  Importing Performance Profiles...
  Recording Installation...
  Clearing Sessions...
  Creating Properties File...
  Creating Shortcut...
  Configuring SSL...
  Configuring Service...
  Configuring Java Security...
  Configuring Java Logging...
  Cleaning Up...
  Starting Deep Security Manager...
  Finish Installation ...

  {% endhighlight %}
